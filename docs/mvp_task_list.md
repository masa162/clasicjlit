# 【古の音】MVP開発タスクリスト

**目標:** 20時間以内でのMVP機能実装

---

## フェーズ1: 基盤構築 (約4時間)

-   [x] **1-1. プロジェクト初期設定**
    -   [x] Next.js (App Router), TypeScript, Tailwind CSSでプロジェクトを新規作成
    -   [x] GitHubリポジトリの作成とPush
    -   [x] Cloudflare PagesとGitHubリポジトリを連携し、CI/CDを設定
-   [x] **1-2. データベース (Cloudflare D1)**
    -   [x] `wrangler.toml` を設定
    -   [x] `schema.sql` ファイルにテーブル定義を記述 (`authors`, `works`, `chapters`, `categories`, `chapter_categories`)
    -   [x] D1データベースを作成し、マイグレーションを実行
-   [x] **1-3. オブジェクトストレージ (Cloudflare R2)**
    -   [x] 音源ファイル保存用のR2バケットを作成
    -   [x] R2バケットを公開設定し、カスタムドメイン（または `r2.dev` URL）を紐付け
-   [x] **1-4. データベース接続設定**
    -   [x] D1に接続するためのlibファイル (`src/lib/d1.ts` など) を作成
    -   [x] R2に接続するためのlibファイル (`src/lib/r2.ts` など) を作成

---

## フェーズ2: 管理画面の実装 (約8時間)

-   [x] **2-1. 管理画面の骨格と認証**
    -   [x] `app/(admin)` ルートグループを作成
    -   [x] `middleware.ts` を使用して、`/admin` 配下にBasic認証を実装
    -   [x] 管理画面用の共通レイアウト (`layout.tsx`) を作成
-   [x] **2-2. マスタデータ管理 (著者・カテゴリ)**
    -   [x] 著者マスタのCRUD（作成・一覧・編集・削除）UIとAPIを作成
    -   [x] カテゴリマスタのCRUD UIとAPIを作成
-   [x] **2-3. 作品 (Works) 管理**
    -   [x] 作品のCRUD UIとAPIを作成
-   [x] **2-4. チャプター (Chapters) 管理**
    -   [x] チャプターのCRUD UIとAPIを作成
    -   [x] 記事本文入力用に `react-simple-mde-editor` を導入
    -   [x] 音源ファイルアップロードAPI (`/api/upload`) を作成し、R2へのアップロード機能を実装
    -   [x] アップロードした音源のURLをチャプターデータに紐付け

---

## フェーズ3: フロントエンド（一般公開側）の実装 (約8時間)

-   [x] **3-1. サイト共通レイアウト**
    -   [x] `app/(frontend)` ルートグループを作成
    -   [x] 3カラムレイアウトの骨格をCSSで作成
    -   [x] ヘッダー、フッター、左ナビゲーションコンポーネントを作成
-   [x] **3-2. 作品・チャプター一覧表示**
    -   [x] トップページ (`/`) に作品一覧を表示 (SSG)
    -   [x] 作品詳細ページ (`/works/[workId]`) にチャプター一覧を表示 (SSG)
-   [x] **3-3. チャプター詳細と音源再生**
    -   [x] チャプター詳細ページ (`/works/[workId]/chapters/[chapterId]`) を作成 (SSG)
    -   [x] `react-markdown` を使用して記事本文を表示
    -   [x] HTML5 `<audio>` タグをベースにしたカスタムオーディオプレイヤーコンポーネントを作成
        -   [x] 再生/一時停止
        -   [x] シークバー
        -   [x] 10秒早送り/巻き戻し
        -   [x] 再生速度変更 (0.75x, 1x, 1.25x, 1.5x)
-   [x] **3-4. 仕上げ**
    -   [x] 検索機能の実装
    -   [x] レスポンシブデザイン対応
    -   [x] UIの英語/日本語切り替え機能 (i18n) の簡易実装

---